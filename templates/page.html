{% import "macros.html" as macros %}
{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ super() }}{% endblock %}

{% block main %}
  {%- if not page.extra.menu -%}
    <h1 class="htitle">{{ page.title }}</h1>

    {%- if page.date %}
      <time class="ptime" datetime="{{ page.date | date(format='%+') }}" pubdate>
        {{- page.date | date(format="%d %B, %Y") -}}
      </time>
    {%- endif %}

    <p>
      {%- if page.taxonomies %}
        {%- for name, taxon in page.taxonomies %}
          {{ name | capitalize }}:
          {%- for item in taxon %}
            &nbsp;<a href="{{ get_taxonomy_url(kind=name, name=item) }}">#{{ item }}</a>
          {%- endfor %}
        {%- endfor %}
      {%- endif %}
    </p>

  {%- endif %}

  {%- if config.extra.table_of_contents.show and not page.extra.hide_table_of_contents and page.toc %}
    <details open>
      <summary>Table of contents</summary>
      {{- macros::table_of_contents(toc=page.toc, max_level=config.extra.table_of_contents.max_level) | indent() | safe() }}
    </details>
  {%- endif %}

  <main>
    {{ page.content | safe }}
  </main>

{% endblock %}
